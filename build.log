=== Kodi Tizen Build Script for Apple Silicon Mac (Podman) ===

This script builds Kodi for Tizen using Podman with x86_64 emulation.

✓ Podman is installed and running

✓ Created Containerfile.tizen

Building Podman image (this may take a few minutes)...
STEP 1/5: FROM ubuntu:22.04
STEP 2/5: ENV DEBIAN_FRONTEND=noninteractive
--> Using cache 66cd04523dbed2dcdb8ffbe3a1c0e95a607553b1ae6d2301881bfdffef98e5be
--> 66cd04523dbe
STEP 3/5: RUN apt-get update && apt-get install -y     build-essential     cmake     curl     git     python3     python3-pip     autoconf     automake     libtool     pkg-config     gawk     gperf     zip     unzip     wget     default-jre     nasm     yasm     libssl-dev     && rm -rf /var/lib/apt/lists/*
--> Using cache 842ffbbc071d3fcb49d3c1f0c7cc3a83292a014f80b5a8f6a2efc37f01c69825
--> 842ffbbc071d
STEP 4/5: WORKDIR /workspace
--> Using cache 5200e2ca1022c69551b25bdd1ef430bccb7b716a11c5203bf0d0d7b2245cc6bd
--> 5200e2ca1022
STEP 5/5: CMD ["/bin/bash"]
--> Using cache 84c358ac9c8b525dc35a9269a78022e96882c035ea0746bfc1bfd573bd0bba5d
COMMIT kodi-tizen-builder
--> 84c358ac9c8b
Successfully tagged localhost/kodi-tizen-builder:latest
84c358ac9c8b525dc35a9269a78022e96882c035ea0746bfc1bfd573bd0bba5d

✓ Podman image built successfully

=== Next Steps ===

1. Run the Podman container:
   podman run --platform linux/amd64 -v $(pwd):/workspace:Z -it kodi-tizen-builder

   Note: The ':Z' flag is important for SELinux labeling on some systems

2. Inside the container, you'll need to:
   a) Download and install Tizen SDK
   b) Configure and build dependencies
   c) Build Kodi

However, note that the Tizen SDK download requires manual steps.
See the detailed instructions below.

=== Detailed Build Instructions ===

Option A: Interactive Build (Recommended)
----------------------------------------
1. Start the container:
   podman run --platform linux/amd64 -v $(pwd):/workspace:Z -it kodi-tizen-builder

2. Inside container, download Tizen SDK:
   wget http://download.tizen.org/sdk/Installer/tizen-studio_5.0/web-cli_Tizen_Studio_5.0_ubuntu-64.bin
   chmod +x web-cli_Tizen_Studio_5.0_ubuntu-64.bin
   ./web-cli_Tizen_Studio_5.0_ubuntu-64.bin --accept-license /Users/benjerome/tizen-studio

3. Install required packages:
   /Users/benjerome/tizen-studio/package-manager/package-manager-cli.bin install \
     NativeToolchain-Gcc-9.2 \
     PLATFORM-6.0-NativeAppDevelopment-CLI

4. Build dependencies:
   cd /workspace/tools/depends
   ./bootstrap
   ./configure \
     --host=arm-tizen-linux-gnueabi \
     --with-toolchain=$HOME/tizen-studio/tools/arm-linux-gnueabi-gcc-9.2 \
     --with-platform=tizen \
     --with-rendersystem=gles \
     --enable-debug=no
   make -j$(nproc)

5. Build Kodi:
   cd /workspace
   make -C tools/depends/target/cmakebuildsys
   cd build
   make -j$(nproc)

6. Create TPK:
   make tpk

Option B: Automated Script (Advanced)
------------------------------------
Create a build script inside the container to automate the process.

=== Alternative: Use Pre-built Container ===

If someone creates a pre-built container with Tizen SDK included,
you can use it directly:

  podman pull <registry>/kodi-tizen-builder:latest
  podman run --platform linux/amd64 -v $(pwd):/workspace:Z -it <registry>/kodi-tizen-builder

=== Podman Tips ===

- List images: podman images
- List containers: podman ps -a
- Remove image: podman rmi kodi-tizen-builder
- Stop machine: podman machine stop
- SSH into machine: podman machine ssh

